namespace continuation_early_return_test

// Delimited continuations can implement early return from nested computation
// This simulates finding the first even number and returning early

fn find_first_even(numbers) {
    reset {
        for n in numbers {
            if n % 2 == 0 {
                // "Return early" by using shift to escape the loop
                shift(fn(k) { n })  // Don't call k, just return n
            }
        }
        -1  // Not found
    }
}

fn main() {
    let result1 = find_first_even([1, 3, 5, 4, 6, 8])
    println(result1)  // Should be 4

    let result2 = find_first_even([1, 3, 5, 7])
    println(result2)  // Should be -1
}

// @beagle.core.snapshot
// 4
// -1
