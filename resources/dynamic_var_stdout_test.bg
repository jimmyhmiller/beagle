namespace dynamic_var_stdout_test

use beagle.core as core

fn main() {
    println("to stdout")

    let buffer = core/new-string-buffer()
    binding (core/out = buffer) {
        println("captured line 1")
        println("captured line 2")
    }

    println("back to stdout")

    // Verify buffer contents - content is a single string with newlines
    print(buffer.content)
}

// @beagle.core.snapshot
// to stdout
// back to stdout
// captured line 1
// captured line 2
