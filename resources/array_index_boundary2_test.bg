namespace array_index_boundary2_test

use raw-mutable-array as arr
fn test_index(a, idx) {
    arr/write-field(a, idx, "test")
    let v = arr/read-field(a, idx)
    if v == null {
        print(idx)
        println(": FAIL")
    } else {
        print(idx)
        println(": OK")
    }
}

fn main() {
    let a = arr/new-array(125000)

    test_index(a, 59000)
    test_index(a, 59500)
    test_index(a, 59600)
    test_index(a, 59700)
    test_index(a, 59800)
    test_index(a, 59900)
    test_index(a, 59950)
    test_index(a, 59990)
    test_index(a, 59999)
    test_index(a, 60000)

    ""
}
