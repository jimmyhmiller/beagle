namespace test_warnings_import_main

import "test_warnings_import_dependency" as dep
import "persistent_vector" as vec

enum Shape {
    Circle,
    Square,
}

fn main() {
    let s = Shape.Circle
    match s {
        Shape.Circle => "circle",
        // Missing Square - should generate 1 warning
    }

    let warnings = compiler-warnings()
    println("Warning count from main + imported file:")
    println(vec/count(warnings))

    // Verify we have exactly 2 warnings (1 from dependency, 1 from main)
    let count = vec/count(warnings)
    if count == 2 {
        println("PASS: Got 2 warnings as expected")
    } else {
        println("FAIL: Expected 2 warnings, got:")
        println(count)
    }

    "done"
}

// Expect
// Warning count from main + imported file:
// 2
// PASS: Got 2 warnings as expected
// done
