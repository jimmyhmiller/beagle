namespace handler_inline_test

import "beagle.effect" as effect

enum Log {
    Info { message }
}

struct ConsoleLogger {}

extend ConsoleLogger with effect/Handler(Log) {
    fn handle(self, op, resume) {
        println("in handler")
        resume(null)
    }
}

fn main() {
    // This should work - inline handler instance without result assignment
    handle effect/Handler(Log) with ConsoleLogger {} {
        perform Log.Info { message: "Hello!" }
        println("After perform")
    }
    println("Done")
}

// Expect
// in handler
// After perform
// Done
