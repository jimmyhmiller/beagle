namespace event_loop_handler_test

use beagle.async as async
use beagle.effect as effect
use beagle.core as core

fn main() {
    // Test sleep with implicit async handler
    let start = core/time-now()
    let sleep_result = async/sleep(50)
    let elapsed = (core/time-now() - start) / 1000000  // Convert to ms
    println("Sleep worked:", elapsed >= 40)

    // Test file exists with implicit async handler
    let result = async/file-exists?("/etc/hosts")
    let exists = async/async-unwrap(result)
    println("File exists:", exists == true)

    println("done")
}

// Expect
// Sleep worked: true
// File exists: true
// done
