namespace test-compiler-warnings

enum Color {
    red,
    green,
    blue,
}

fn main() {
    let color = Color.red

    // This match is non-exhaustive - missing blue
    let result = match color {
        Color.red => "RED",
        Color.green => "GREEN",
    }

    // Call diagnostics to get all diagnostics as a persistent vector
    let diags = diagnostics()
    println("Diagnostic count:")
    println(diags)

    println(result)
    "done"
}

// Expect
// Diagnostic count:
// [Diagnostic { severity: DiagnosticSeverity.warning, kind: "NonExhaustiveMatch", file-name: "resources/test_compiler_warnings.bg", line: 13, column: 23, message: "Non-exhaustive match on enum 'Color'. Missing variants: blue", enum-name: "Color", missing-variants: ["blue"] }]
// RED
